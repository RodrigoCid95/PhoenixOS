import{g as o,c as t,a as n}from"./p-09c49e1c.js";import{a as i,r as a,b as e,c as r}from"./p-22318485.js";import{a as s,K as c}from"./p-7e6e551b.js";import"./p-28e84784.js";import"./p-be7dc084.js";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const d=new WeakMap,l=(o,t,n,i=0,a=!1)=>{d.has(o)!==n&&(n?u(o,t,i,a):f(o,t))},u=(o,t,n,i=!1)=>{const a=t.parentNode,e=t.cloneNode(!1);e.classList.add("cloned-input"),e.tabIndex=-1,i&&(e.disabled=!0),a.appendChild(e),d.set(o,e);const r="rtl"===o.ownerDocument.dir?9999:-9999;o.style.pointerEvents="none",t.style.transform=`translate3d(${r}px,${n}px,0) scale(0)`},f=(o,t)=>{const n=d.get(o);n&&(d.delete(o),n.remove()),o.style.pointerEvents="",t.style.transform=""},p="input, textarea, [no-blur], [contenteditable]",w=(o,t,n)=>{const i=o.$ionPaddingTimer;i&&clearTimeout(i),t>0?o.style.setProperty("--keyboard-offset",`${t}px`):o.$ionPaddingTimer=setTimeout((()=>{o.style.setProperty("--keyboard-offset","0px"),n&&n()}),120)},m=(o,t,n)=>{o.addEventListener("focusout",(()=>{t&&w(t,0,n)}),{once:!0})};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
let b=0;const h=o=>{document.activeElement!==o&&(o.setAttribute("data-ionic-skip-scroll-assist","true"),o.focus())},y=async(n,i,a,r,s,c,d=!1)=>{if(!a&&!r)return;const u=((o,t,n)=>{var i;return((o,t,n,i)=>{const a=o.top,e=o.bottom,r=t.top,s=r+15,c=Math.min(t.bottom,i-n)-50-e,d=s-a,l=Math.round(c<0?-c:d>0?-d:0),u=Math.min(l,a-r),f=Math.abs(u);return{scrollAmount:u,scrollDuration:Math.min(400,Math.max(150,f/.3)),scrollPadding:n,inputSafeY:4-(a-s)}})((null!==(i=o.closest("ion-item,[ion-item]"))&&void 0!==i?i:o).getBoundingClientRect(),t.getBoundingClientRect(),n,o.ownerDocument.defaultView.innerHeight)})(n,a||r,s);if(a&&Math.abs(u.scrollAmount)<4)return h(i),void(c&&null!==a&&(w(a,b),m(i,a,(()=>b=0))));if(l(n,i,!0,u.inputSafeY,d),h(i),e((()=>n.click())),c&&a&&(b=u.scrollPadding,w(a,b)),"undefined"!=typeof window){let e;const r=async()=>{void 0!==e&&clearTimeout(e),window.removeEventListener("ionKeyboardDidShow",s),window.removeEventListener("ionKeyboardDidShow",r),a&&await t(a,0,u.scrollAmount,u.scrollDuration),l(n,i,!1,u.inputSafeY),h(i),c&&m(i,a,(()=>b=0))},s=()=>{window.removeEventListener("ionKeyboardDidShow",s),window.addEventListener("ionKeyboardDidShow",r)};if(a){const t=await o(a);if(u.scrollAmount>t.scrollHeight-t.clientHeight-t.scrollTop)return"password"===i.type?(u.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",s)):window.addEventListener("ionKeyboardDidShow",r),void(e=setTimeout(r,1e3))}r()}},S=async(o,t)=>{const e=document,d="ios"===t,u="android"===t,f=o.getNumber("keyboardHeight",290),w=o.getBoolean("scrollAssist",!0),m=o.getBoolean("hideCaretOnScroll",d),b=o.getBoolean("inputBlurring",d),h=o.getBoolean("scrollPadding",!0),S=Array.from(e.querySelectorAll("ion-input, ion-textarea")),M=new WeakMap,k=new WeakMap,D=await c.getResizeMode(),v=async o=>{await new Promise((t=>r(o,t)));const t=o.shadowRoot||o,e=t.querySelector("input")||t.querySelector("textarea"),c=n(o),d=c?null:o.closest("ion-footer");if(e){if(c&&m&&!M.has(o)){const t=((o,t,n)=>{if(!n||!t)return()=>{};const e=n=>{var i;(i=t)===i.getRootNode().activeElement&&l(o,t,n)},r=()=>l(o,t,!1),s=()=>e(!0),c=()=>e(!1);return i(n,"ionScrollStart",s),i(n,"ionScrollEnd",c),t.addEventListener("blur",r),()=>{a(n,"ionScrollStart",s),a(n,"ionScrollEnd",c),t.removeEventListener("blur",r)}})(o,e,c);M.set(o,t)}if("date"!==e.type&&"datetime-local"!==e.type&&(c||d)&&w&&!k.has(o)){const t=((o,t,n,i,a,e,r,c=!1)=>{const d=e&&(void 0===r||r.mode===s.None),l=async()=>{t.hasAttribute("data-ionic-skip-scroll-assist")?t.removeAttribute("data-ionic-skip-scroll-assist"):y(o,t,n,i,a,d,c)};return o.addEventListener("focusin",l,!0),()=>{o.removeEventListener("focusin",l,!0)}})(o,e,c,d,f,h,D,u);k.set(o,t)}}};b&&(()=>{let o=!0,t=!1;const n=document;i(n,"ionScrollStart",(()=>{t=!0})),n.addEventListener("focusin",(()=>{o=!0}),!0),n.addEventListener("touchend",(i=>{if(t)return void(t=!1);const a=n.activeElement;if(!a)return;if(a.matches(p))return;const e=i.target;e!==a&&(e.matches(p)||e.closest(p)||(o=!1,setTimeout((()=>{o||a.blur()}),50)))}),!1)})();for(const o of S)v(o);e.addEventListener("ionInputDidLoad",(o=>{v(o.detail)})),e.addEventListener("ionInputDidUnload",(o=>{(o=>{if(m){const t=M.get(o);t&&t(),M.delete(o)}if(w){const t=k.get(o);t&&t(),k.delete(o)}})(o.detail)}))};export{S as startInputShims}