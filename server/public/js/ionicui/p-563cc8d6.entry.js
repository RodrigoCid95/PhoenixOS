import{e,w as o,r as t,h as i,H as n,c as a}from"./p-27fd00b4.js";import{g as s,f as r,p as l}from"./p-09c49e1c.js";import{h as d,i as c}from"./p-22318485.js";import{h}from"./p-0e4de1d0.js";import{g as p}from"./p-c5fce703.js";import"./p-28e84784.js";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const b=e=>{const o=document.querySelector(`${e}.ion-cloned-element`);if(null!==o)return o;const t=document.createElement(e);return t.classList.add("ion-cloned-element"),t.style.setProperty("display","none"),document.body.appendChild(t),t},u=e=>{if(!e)return;const o=e.querySelectorAll("ion-toolbar");return{el:e,toolbars:Array.from(o).map((e=>{const o=e.querySelector("ion-title");return{el:e,background:e.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:o,innerTitleEl:o?o.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(e.querySelectorAll("ion-buttons"))}}))}},f=(e,o)=>{"fade"!==e.collapse&&(void 0===o?e.style.removeProperty("--opacity-scale"):e.style.setProperty("--opacity-scale",o.toString()))},m=(e,o=!0)=>{const t=e.el;o?(t.classList.remove("header-collapse-condense-inactive"),t.removeAttribute("aria-hidden")):(t.classList.add("header-collapse-condense-inactive"),t.setAttribute("aria-hidden","true"))},y=(t,i,n)=>{e((()=>{const e=t.scrollTop,a=i.clientHeight,s=n?n.clientHeight:0;if(null!==n&&e<s)return i.style.setProperty("--opacity-scale","0"),void t.style.setProperty("clip-path",`inset(${a}px 0px 0px 0px)`);const r=d(0,(e-s)/10,1);o((()=>{t.style.removeProperty("clip-path"),i.style.setProperty("--opacity-scale",r.toString())}))}))};let g=class{constructor(e){t(this,e),this.inheritedAttributes={},this.setupFadeHeader=async(e,o)=>{const t=this.scrollEl=await s(e);this.contentScrollCallback=()=>{y(this.scrollEl,this.el,o)},t.addEventListener("scroll",this.contentScrollCallback),y(this.scrollEl,this.el,o)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=c(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if("ios"!==p(this))return;const{collapse:e}=this,t="condense"===e,i="fade"===e;if(this.destroyCollapsibleHeader(),t){const e=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),t=e?r(e):null;o((()=>{b("ion-title").size="large",b("ion-back-button")})),await this.setupCondenseHeader(t,e)}else if(i){const e=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),o=e?r(e):null;if(!o)return void l(this.el);const t=o.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(o,t)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(t,i){if(!t||!i)return void l(this.el);if("undefined"==typeof IntersectionObserver)return;this.scrollEl=await s(t);const n=i.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(n).find((e=>"condense"!==e.collapse)),!this.collapsibleMainHeader)return;const a=u(this.collapsibleMainHeader),r=u(this.el);a&&r&&(m(a,!1),f(a.el,0),this.intersectionObserver=new IntersectionObserver((e=>{((e,t,i,n)=>{o((()=>{const o=n.scrollTop;((e,o,t)=>{if(!e[0].isIntersecting)return;const i=e[0].intersectionRatio>.9||t<=0?0:100*(1-e[0].intersectionRatio)/75;f(o.el,1===i?void 0:i)})(e,t,o);const a=e[0],s=a.intersectionRect,r=s.width*s.height,l=0===r&&0==a.rootBounds.width*a.rootBounds.height,d=Math.abs(s.left-a.boundingClientRect.left),c=Math.abs(s.right-a.boundingClientRect.right);l||r>0&&(d>=5||c>=5)||(a.isIntersecting?(m(t,!1),m(i)):(0===s.x&&0===s.y||0!==s.width&&0!==s.height)&&o>0&&(m(t),m(i,!1),f(t.el)))}))})(e,a,r,this.scrollEl)}),{root:t,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(r.toolbars[r.toolbars.length-1].el),this.contentScrollCallback=()=>{((t,i,n)=>{e((()=>{const e=d(1,1+-t.scrollTop/500,1.1);null===n.querySelector("ion-refresher.refresher-native")&&o((()=>{((e=[],o=1,t=!1)=>{e.forEach((e=>{const i=e.ionTitleEl,n=e.innerTitleEl;i&&"large"===i.size&&(n.style.transition=t?"all 0.2s ease-in-out":"",n.style.transform=`scale3d(${o}, ${o}, 1)`)}))})(i.toolbars,e)}))}))})(this.scrollEl,r,t)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),o((()=>{void 0!==this.collapsibleMainHeader&&this.collapsibleMainHeader.classList.add("header-collapse-main")})))}render(){const{translucent:e,inheritedAttributes:o}=this,t=p(this),a=this.collapse||"none",s=h("ion-menu",this.el)?"none":"banner";return i(n,Object.assign({role:s,class:{[t]:!0,[`header-${t}`]:!0,"header-translucent":this.translucent,[`header-collapse-${a}`]:!0,[`header-translucent-${t}`]:this.translucent}},o),"ios"===t&&e&&i("div",{class:"header-background"}),i("slot",null))}get el(){return a(this)}};g.style={ios:"ion-header{display:block;position:relative;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports (backdrop-filter: blur(0)){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:7px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",md:"ion-header{display:block;position:relative;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{box-shadow:none}"};export{g as ion_header}